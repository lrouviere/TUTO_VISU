<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 4 Applications web avec Shiny | Tutoriel : visualisation avec R</title>
  <meta name="description" content="Chapitre 4 Applications web avec Shiny | Tutoriel : visualisation avec R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 4 Applications web avec Shiny | Tutoriel : visualisation avec R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 4 Applications web avec Shiny | Tutoriel : visualisation avec R" />
  
  
  

<meta name="author" content="Laurent Rouvière" />


<meta name="date" content="2021-02-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="quelques-outils-de-visualisation-dynamiqueinteractive.html"/>
<link rel="next" href="références.html"/>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/amcharts-3.21.13/amcharts.js"></script>
<script src="libs/ramcharts_base-binding-2.1.13/ramcharts_base.js"></script>
<script src="libs/amcharts_type_serial-3.20.18/serial.js"></script>
<script src="libs/amcharts_themes_light.js-3.20.18/light.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/amcharts_type_xy-3.20.18/xy.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Visualisation avec R, L. Rouvière</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Présentation</a></li>
<li class="chapter" data-level="1" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>1</b> Visualisation avec ggplot2</a><ul>
<li class="chapter" data-level="1.1" data-path="ggplot2.html"><a href="ggplot2.html#fonctions-graphiques-conventionnelles"><i class="fa fa-check"></i><b>1.1</b> Fonctions graphiques conventionnelles</a><ul>
<li class="chapter" data-level="1.1.1" data-path="ggplot2.html"><a href="ggplot2.html#la-fonction-plot"><i class="fa fa-check"></i><b>1.1.1</b> La fonction <strong>plot</strong></a></li>
<li class="chapter" data-level="1.1.2" data-path="ggplot2.html"><a href="ggplot2.html#graphes-interactifs-avec-ramcharts"><i class="fa fa-check"></i><b>1.1.2</b> Graphes interactifs avec rAmCharts</a></li>
<li class="chapter" data-level="1.1.3" data-path="ggplot2.html"><a href="ggplot2.html#quelques-exercices"><i class="fa fa-check"></i><b>1.1.3</b> Quelques exercices</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="ggplot2.html"><a href="ggplot2.html#la-grammaire-ggplot2"><i class="fa fa-check"></i><b>1.2</b> La grammaire <strong>ggplot2</strong></a><ul>
<li class="chapter" data-level="1.2.1" data-path="ggplot2.html"><a href="ggplot2.html#premiers-graphes-ggplot2"><i class="fa fa-check"></i><b>1.2.1</b> Premiers graphes <code>ggplot2</code></a></li>
<li class="chapter" data-level="1.2.2" data-path="ggplot2.html"><a href="ggplot2.html#data-et-aesthetics"><i class="fa fa-check"></i><b>1.2.2</b> Data et aesthetics</a></li>
<li class="chapter" data-level="1.2.3" data-path="ggplot2.html"><a href="ggplot2.html#geometrics"><i class="fa fa-check"></i><b>1.2.3</b> Geometrics</a></li>
<li class="chapter" data-level="1.2.4" data-path="ggplot2.html"><a href="ggplot2.html#statistics"><i class="fa fa-check"></i><b>1.2.4</b> Statistics</a></li>
<li class="chapter" data-level="1.2.5" data-path="ggplot2.html"><a href="ggplot2.html#scales"><i class="fa fa-check"></i><b>1.2.5</b> Scales</a></li>
<li class="chapter" data-level="1.2.6" data-path="ggplot2.html"><a href="ggplot2.html#group-et-facets"><i class="fa fa-check"></i><b>1.2.6</b> Group et facets</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="ggplot2.html"><a href="ggplot2.html#compléments"><i class="fa fa-check"></i><b>1.3</b> Compléments</a></li>
<li class="chapter" data-level="1.4" data-path="ggplot2.html"><a href="ggplot2.html#quelques-exercices-supplémentaires"><i class="fa fa-check"></i><b>1.4</b> Quelques exercices supplémentaires</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="faire-des-cartes-avec-r.html"><a href="faire-des-cartes-avec-r.html"><i class="fa fa-check"></i><b>2</b> Faire des cartes avec R</a><ul>
<li class="chapter" data-level="2.1" data-path="faire-des-cartes-avec-r.html"><a href="faire-des-cartes-avec-r.html#le-package-ggmap"><i class="fa fa-check"></i><b>2.1</b> Le package ggmap</a></li>
<li class="chapter" data-level="2.2" data-path="faire-des-cartes-avec-r.html"><a href="faire-des-cartes-avec-r.html#cartes-avec-contours-le-format-shapefile"><i class="fa fa-check"></i><b>2.2</b> Cartes avec contours, le format shapefile</a><ul>
<li class="chapter" data-level="2.2.1" data-path="faire-des-cartes-avec-r.html"><a href="faire-des-cartes-avec-r.html#challenge1"><i class="fa fa-check"></i><b>2.2.1</b> Challenge 1 : carte des températures avec sf</a></li>
<li class="chapter" data-level="2.2.2" data-path="faire-des-cartes-avec-r.html"><a href="faire-des-cartes-avec-r.html#trouver-des-cartes-au-format-shapefile"><i class="fa fa-check"></i><b>2.2.2</b> Trouver des cartes au format shapefile</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="faire-des-cartes-avec-r.html"><a href="faire-des-cartes-avec-r.html#cartes-interactives-avec-leaflet"><i class="fa fa-check"></i><b>2.3</b> Cartes interactives avec leaflet</a><ul>
<li class="chapter" data-level="2.3.1" data-path="faire-des-cartes-avec-r.html"><a href="faire-des-cartes-avec-r.html#challenge-2-visualisation-des-stations-velib-à-paris"><i class="fa fa-check"></i><b>2.3.1</b> Challenge 2 : Visualisation des stations velib à Paris</a></li>
<li class="chapter" data-level="2.3.2" data-path="faire-des-cartes-avec-r.html"><a href="faire-des-cartes-avec-r.html#carte-des-températures-avec-leaflet"><i class="fa fa-check"></i><b>2.3.2</b> Carte des températures avec leaflet</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="quelques-outils-de-visualisation-dynamiqueinteractive.html"><a href="quelques-outils-de-visualisation-dynamiqueinteractive.html"><i class="fa fa-check"></i><b>3</b> Quelques outils de visualisation dynamique/interactive</a><ul>
<li class="chapter" data-level="3.1" data-path="quelques-outils-de-visualisation-dynamiqueinteractive.html"><a href="quelques-outils-de-visualisation-dynamiqueinteractive.html#représentations-classiques-avec-ramcharts-et-plotly"><i class="fa fa-check"></i><b>3.1</b> Représentations classiques avec <code>rAmCharts</code> et <code>plotly</code></a></li>
<li class="chapter" data-level="3.2" data-path="quelques-outils-de-visualisation-dynamiqueinteractive.html"><a href="quelques-outils-de-visualisation-dynamiqueinteractive.html#graphes-pour-visualiser-des-réseaux-avec-visnetwork"><i class="fa fa-check"></i><b>3.2</b> Graphes pour visualiser des réseaux avec visNetwork</a></li>
<li class="chapter" data-level="3.3" data-path="quelques-outils-de-visualisation-dynamiqueinteractive.html"><a href="quelques-outils-de-visualisation-dynamiqueinteractive.html#dashboard"><i class="fa fa-check"></i><b>3.3</b> Dashboard</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>4</b> Applications web avec Shiny</a><ul>
<li class="chapter" data-level="4.1" data-path="shiny.html"><a href="shiny.html#une-première-application"><i class="fa fa-check"></i><b>4.1</b> Une première application</a></li>
<li class="chapter" data-level="4.2" data-path="shiny.html"><a href="shiny.html#input---output"><i class="fa fa-check"></i><b>4.2</b> Input - output</a></li>
<li class="chapter" data-level="4.3" data-path="shiny.html"><a href="shiny.html#structurer-lapplication"><i class="fa fa-check"></i><b>4.3</b> Structurer l’application</a></li>
<li class="chapter" data-level="4.4" data-path="shiny.html"><a href="shiny.html#ajout-de-graphes-interactifs"><i class="fa fa-check"></i><b>4.4</b> Ajout de graphes interactifs</a></li>
<li class="chapter" data-level="4.5" data-path="shiny.html"><a href="shiny.html#reactive-isolation-observe-html"><i class="fa fa-check"></i><b>4.5</b> Reactive, isolation, observe, html, …</a></li>
<li class="chapter" data-level="4.6" data-path="shiny.html"><a href="shiny.html#exercices-complémentaires"><i class="fa fa-check"></i><b>4.6</b> Exercices complémentaires</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="références.html"><a href="références.html"><i class="fa fa-check"></i>Références</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tutoriel : visualisation avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="shiny" class="section level1">
<h1><span class="header-section-number">Chapitre 4</span> Applications web avec Shiny</h1>
<p><code>Shiny</code> est un package <strong>R</strong> qui permet la création simple d’applications web intéractives depuis <strong>R</strong>. Cette partie provient essentiellement du tutoriel de Benoît Thieurmel disponible ici : <a href="https://github.com/datastorm-open/tuto_shiny_rennes" class="uri">https://github.com/datastorm-open/tuto_shiny_rennes</a>.</p>
<div id="une-première-application" class="section level2">
<h2><span class="header-section-number">4.1</span> Une première application</h2>
<p>Créer un répertoire pour l’application avec <strong>RStudio</strong></p>
<pre><code>File -&gt; New Project -&gt; New Directory -&gt; Shiny Web Application</code></pre>
<p>Choisir une application <strong>Multiple File</strong>.</p>
<p>Si cette option n’est pas disponible (ça peut dépendre des versions de Rstudio), on pourra utiliser</p>
<pre><code>File -&gt; New File -&gt; Shiny Web App -&gt; Multiple File</code></pre>
<p>Deux fichier sont automatiquement générés : <code>ui.R</code> et <code>server.R</code>. Lancer l’application en cliquant sur le bouton <code>Run App</code>.</p>
<ul>
<li>Changer le titre de l’application. On pourra l’appeler <strong>My first application</strong>.</li>
<li>Mettre à jour et vérifier que le titre a bien été changé.</li>
</ul>
</div>
<div id="input---output" class="section level2">
<h2><span class="header-section-number">4.2</span> Input - output</h2>
<p>On garde la même application. On ne s’intéresera pas à la structure dans cette partie, on veut simplement ajouter</p>
<ul>
<li>des nouveaux <strong>inputs</strong> dans le <code>sidebarPanel</code>, après le <code>sliderInput</code>. On n’oubliera pas de séparer les inputs par des virgules;</li>
<li>des nouveaux <strong>outputs</strong> dans le <code>mainPanel</code>, après le <code>plotOutput</code>. Là encore, on n’oubliera pas de séparer les outputs par des virgules.</li>
</ul>
<p>Pour résumer on souhaite une colonne avec tous les inputs et une autre avec tous les outputs.</p>
<ol style="list-style-type: decimal">
<li><p>Ajouter dans <code>ui.R</code> une entrée qui permette de changer la couleur de l’histogramme. On pourra utiliser</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="shiny.html#cb156-1"></a><span class="kw">selectInput</span>(<span class="dt">inputId =</span> <span class="st">&quot;color&quot;</span>, <span class="dt">label =</span> <span class="st">&quot;Couleur :&quot;</span>,</span>
<span id="cb156-2"><a href="shiny.html#cb156-2"></a>            <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">&quot;Rouge&quot;</span> =<span class="st"> &quot;red&quot;</span>, <span class="st">&quot;Vert&quot;</span> =<span class="st"> &quot;green&quot;</span>, <span class="st">&quot;Bleu&quot;</span> =<span class="st"> &quot;blue&quot;</span>))</span></code></pre></div></li>
<li><p>Ajouter une sortie qui permette de visualiser le <strong>summary</strong> du jeu de données <code>faithful</code>. On pourra utiliser</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="shiny.html#cb157-1"></a><span class="co"># ui.R</span></span>
<span id="cb157-2"><a href="shiny.html#cb157-2"></a><span class="kw">verbatimTextOutput</span>(<span class="st">&quot;...&quot;</span>)</span>
<span id="cb157-3"><a href="shiny.html#cb157-3"></a></span>
<span id="cb157-4"><a href="shiny.html#cb157-4"></a><span class="co"># server.R</span></span>
<span id="cb157-5"><a href="shiny.html#cb157-5"></a>output<span class="op">$</span>... &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</span>
<span id="cb157-6"><a href="shiny.html#cb157-6"></a>  <span class="kw">summary</span>(...)</span>
<span id="cb157-7"><a href="shiny.html#cb157-7"></a>})</span></code></pre></div></li>
</ol>

<div class="exercise">
<span id="exr:exo-shiny-input-output" class="exercise"><strong>Exercice 4.1  (Ajouter des inputs/outputs)  </strong></span>
</div>

<p>Ajouter des entrées/sorties à votre application pour</p>
<ol style="list-style-type: decimal">
<li><p>proposer à l’utilisateur de choisir un titre pour l’histogramme (utiliser <code>textInput</code> dans l’<strong>ui</strong> et l’option <code>main</code> dans <strong>hist</strong>);</p></li>
<li><p>choisir la variable de <code>faithful</code> à représenter dans l’histogramme avec un <code>radioButtons</code> ayant pour choix <code>colnames(faithful)</code>;</p></li>
<li><p>visualiser le jeu de données entier (<code>renderDataTable</code> &amp; <code>dataTableOutput</code>);</p></li>
<li><p>ajouter un text sous l’histogramme qui indique le nombre de classes (<code>renderText</code> et <code>paste</code> dans <strong>server</strong>, <code>textOutput</code> dans <strong>ui</strong>);</p></li>
<li><p>remplacer le <code>selectInput</code> du choix de la couleur par un <code>colourInput</code> (utiliser la package <a href="https://cran.r-project.org/web/packages/colourpicker/vignettes/colourpicker.html">colourpicker</a>);</p></li>
<li><p>exporter le graphe (<code>downloadButton</code> &amp; <code>jpeg</code>).</p></li>
</ol>
<p>L’application demandée pourra ressembler à</p>
<iframe src="https://input-output-rouviere-shiny.apps.math.cnrs.fr/?showcase=0" width="760" height="650px">
</iframe>
<p>Elle est également disponible ici <a href="https://input-output-rouviere-shiny.apps.math.cnrs.fr/" class="uri">https://input-output-rouviere-shiny.apps.math.cnrs.fr/</a>.</p>
</div>
<div id="structurer-lapplication" class="section level2">
<h2><span class="header-section-number">4.3</span> Structurer l’application</h2>
<p>On considère l’application <strong>app_structure</strong> disponible <a href="https://lrouviere.github.io/VISU/">ici</a>. C’est quasiment la même que précédemment avec un <code>navbarPage</code> qui définit</p>
<ul>
<li>un onglet <em>Data</em> pour visualiser les données (table + summary)</li>
<li>un onglet <em>Visualisation</em> : inputs + histogramme.</li>
</ul>

<div class="exercise">
<span id="exr:exo-shiny-structure1" class="exercise"><strong>Exercice 4.2  (Structurer son application)  </strong></span>
</div>

<ol style="list-style-type: decimal">
<li><p>Dans l’onglet <strong>Data</strong> utiliser <code>navlistPanel</code> pour séparer le <code>summary</code> et la table <code>table</code> en deux onglets :</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="shiny.html#cb158-1"></a><span class="co"># rappel de la structure (ui.R)</span></span>
<span id="cb158-2"><a href="shiny.html#cb158-2"></a><span class="kw">navlistPanel</span>(</span>
<span id="cb158-3"><a href="shiny.html#cb158-3"></a><span class="st">&quot;Title of the structure&quot;</span>,</span>
<span id="cb158-4"><a href="shiny.html#cb158-4"></a><span class="kw">tabPanel</span>(<span class="st">&quot;Title of the tab&quot;</span>, ... <span class="st">&quot;(content of the tab)&quot;</span>),</span>
<span id="cb158-5"><a href="shiny.html#cb158-5"></a><span class="kw">tabPanel</span>(<span class="st">&quot;Title of the tab&quot;</span>, ... <span class="st">&quot;(content of the tab)&quot;</span>)</span>
<span id="cb158-6"><a href="shiny.html#cb158-6"></a>)</span></code></pre></div></li>
<li><p>Dans l’onglet <strong>Visualization</strong> changer <code>sidebarLayout</code> - <code>sidebarPanel</code> - <code>mainPanel</code> par un <code>fluidRow</code> à 2 colonnes :</p>
<ul>
<li>1/4 : pour le <code>sidebarPanel</code></li>
<li>3/4 : pour le <code>mainPanel</code>.</li>
</ul>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="shiny.html#cb159-1"></a><span class="kw">fluidRow</span>(</span>
<span id="cb159-2"><a href="shiny.html#cb159-2"></a>  <span class="kw">column</span>(<span class="dt">width =</span> <span class="dv">3</span>, ...), <span class="co"># column 1/4 (3/12)</span></span>
<span id="cb159-3"><a href="shiny.html#cb159-3"></a>  <span class="kw">column</span>(<span class="dt">width =</span> <span class="dv">9</span>, ...)  <span class="co"># column 3/4 (9/12)</span></span>
<span id="cb159-4"><a href="shiny.html#cb159-4"></a>)</span></code></pre></div>
<p><em>Indication : utiliser <code>wellPanel</code> pour la colonne de gauche.</em></p></li>
<li><p>Ajouter un bloxplot dans l’onglet visualisation (même variable et même couleur). On pourra également utiliser <code>tabsetPanel</code> pour avoir deux onglets pour l’histogramme et le boxplot.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="shiny.html#cb160-1"></a><span class="co"># rappel de la structure (ui.R)</span></span>
<span id="cb160-2"><a href="shiny.html#cb160-2"></a><span class="kw">tabsetPanel</span>(</span>
<span id="cb160-3"><a href="shiny.html#cb160-3"></a><span class="kw">tabPanel</span>(<span class="st">&quot;Title of the tab&quot;</span>, ... <span class="st">&quot;(content of the tab)&quot;</span>),</span>
<span id="cb160-4"><a href="shiny.html#cb160-4"></a><span class="kw">tabPanel</span>(<span class="st">&quot;Title of the tab&quot;</span>, ... <span class="st">&quot;(content of the tab)&quot;</span>)</span>
<span id="cb160-5"><a href="shiny.html#cb160-5"></a>)</span></code></pre></div></li>
</ol>
<p>L’application demandée pourra ressembler à</p>
<iframe src="https://structure-rouviere-shiny.apps.math.cnrs.fr/?showcase=0" width="760" height="650px">
</iframe>
<p>Elle est également disponible ici <a href="https://structure-rouviere-shiny.apps.math.cnrs.fr/" class="uri">https://structure-rouviere-shiny.apps.math.cnrs.fr/</a>.</p>
<p><strong>Pour aller plus loin</strong> : faire la même application avec <a href="https://rstudio.github.io/shinydashboard/">shinydashboard</a> (<a href="https://rstudio.github.io/shinydashboard/" class="uri">https://rstudio.github.io/shinydashboard/</a>).</p>
</div>
<div id="ajout-de-graphes-interactifs" class="section level2">
<h2><span class="header-section-number">4.4</span> Ajout de graphes interactifs</h2>
<p>Dans l’application précédente, remplacer l’histogramme et la boxplot par des graphes javascript réalisés avec <a href="http://datastorm-open.github.io/introduction_ramcharts/">rAmCharts</a>. On pourra utiliser</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="shiny.html#cb161-1"></a><span class="co"># server.R</span></span>
<span id="cb161-2"><a href="shiny.html#cb161-2"></a>output<span class="op">$</span>distPlot &lt;-<span class="st"> </span><span class="kw">renderAmCharts</span>({...})</span>
<span id="cb161-3"><a href="shiny.html#cb161-3"></a></span>
<span id="cb161-4"><a href="shiny.html#cb161-4"></a><span class="co"># ui.R</span></span>
<span id="cb161-5"><a href="shiny.html#cb161-5"></a><span class="kw">amChartsOutput</span>(<span class="st">&quot;...&quot;</span>)</span></code></pre></div>
<p>L’application demandée pourra ressembler à</p>
<iframe src="https://interactifs-rouviere-shiny-2.apps.math.cnrs.fr/?showcase=0" width="760" height="650px">
</iframe>
<p>Elle est également disponible ici <a href="https://interactifs-rouviere-shiny-2.apps.math.cnrs.fr/" class="uri">https://interactifs-rouviere-shiny-2.apps.math.cnrs.fr/</a>.</p>
</div>
<div id="reactive-isolation-observe-html" class="section level2">
<h2><span class="header-section-number">4.5</span> Reactive, isolation, observe, html, …</h2>
<p>Garder la même application et</p>
<ul>
<li><p>ajouter un <code>actionButton</code> combiné à un <code>isolate</code> pour mettre à jour l’application uniquement lorsque l’utilisateur clique sur le bouton.</p></li>
<li><p>Utiliser <code>observeEvent</code> pour forcer l’apparition de l’histogramme lorsqu’on met à jour l’application. On pourra utiliser</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="shiny.html#cb162-1"></a><span class="co"># think to add  &quot;session&quot; </span></span>
<span id="cb162-2"><a href="shiny.html#cb162-2"></a><span class="kw">shinyServer</span>(<span class="cf">function</span>(input, output, session)</span>
<span id="cb162-3"><a href="shiny.html#cb162-3"></a></span>
<span id="cb162-4"><a href="shiny.html#cb162-4"></a><span class="co"># an id </span></span>
<span id="cb162-5"><a href="shiny.html#cb162-5"></a><span class="kw">tabsetPanel</span>(<span class="dt">id =</span> <span class="st">&quot;viz&quot;</span>, </span>
<span id="cb162-6"><a href="shiny.html#cb162-6"></a>  <span class="kw">tabPanel</span>(<span class="st">&quot;Histogram&quot;</span>, ...</span>
<span id="cb162-7"><a href="shiny.html#cb162-7"></a></span>
<span id="cb162-8"><a href="shiny.html#cb162-8"></a><span class="co"># and finaly</span></span>
<span id="cb162-9"><a href="shiny.html#cb162-9"></a><span class="kw">observeEvent</span>(input<span class="op">$</span>go, {</span>
<span id="cb162-10"><a href="shiny.html#cb162-10"></a><span class="kw">updateTabsetPanel</span>(session, <span class="dt">inputId =</span> <span class="st">&quot;viz&quot;</span>, <span class="dt">selected =</span> <span class="st">&quot;Histogram&quot;</span>)</span>
<span id="cb162-11"><a href="shiny.html#cb162-11"></a>})  </span></code></pre></div></li>
<li><p>Utiliser <code>reactive</code>pour stocker la variable sélectionnée</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="shiny.html#cb163-1"></a><span class="co"># Example of reactive</span></span>
<span id="cb163-2"><a href="shiny.html#cb163-2"></a>data &lt;-<span class="st"> </span><span class="kw">reactive</span>({</span>
<span id="cb163-3"><a href="shiny.html#cb163-3"></a>  ...</span>
<span id="cb163-4"><a href="shiny.html#cb163-4"></a>})</span>
<span id="cb163-5"><a href="shiny.html#cb163-5"></a></span>
<span id="cb163-6"><a href="shiny.html#cb163-6"></a>output<span class="op">$</span>plot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</span>
<span id="cb163-7"><a href="shiny.html#cb163-7"></a>  x &lt;-<span class="st"> </span><span class="kw">data</span>()</span>
<span id="cb163-8"><a href="shiny.html#cb163-8"></a>  ...</span>
<span id="cb163-9"><a href="shiny.html#cb163-9"></a>})</span></code></pre></div></li>
<li><p>Ajouter un titre en bleu sur le jeu de données. On pourra utiliser <code>h1</code></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="shiny.html#cb164-1"></a><span class="kw">h1</span>(<span class="st">&quot;Dataset&quot;</span>, <span class="dt">style =</span> <span class="st">&quot;color : #0099ff;text-align:center&quot;</span>)</span></code></pre></div></li>
<li><p>Ajouter un troisième onglet pour présenter un résumé de votre Uinersité, avec un logo de l’institution et un lien vers son site web.</p></li>
<li><p><strong>Pour aller plus loin</strong> : changer le thème de l’application avec un fichier de style <code>.css</code>. On pourra par exemple utiliser bootswatch <a href="http://bootswatch.com/3" class="uri">http://bootswatch.com/3</a>.</p></li>
</ul>
<p>L’application finale pourra ressembler à</p>
<iframe src="https://plus-loin-rouviere-shiny-2.apps.math.cnrs.fr/?showcase=0" width="760" height="650px">
</iframe>
<p>Elle est également disponible ici <a href="https://plus-loin-rouviere-shiny-2.apps.math.cnrs.fr/" class="uri">https://plus-loin-rouviere-shiny-2.apps.math.cnrs.fr/</a>.</p>
</div>
<div id="exercices-complémentaires" class="section level2">
<h2><span class="header-section-number">4.6</span> Exercices complémentaires</h2>

<div class="exercise">
<span id="exr:shiny-desc-app" class="exercise"><strong>Exercice 4.3  (Une application simple descriptive)  </strong></span>
</div>

<p>On considère le jeu de données <em>SAheart</em> du package <strong>bestglm</strong>.</p>
<ol style="list-style-type: decimal">
<li><p>A l’aide du package <strong>rAmCharts</strong>, représenter les histogrammes des variables quantitatives du jeu de données ainsi que les boxplots de ces variables en fonction de la variable <strong>chd</strong>.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="shiny.html#cb165-1"></a><span class="kw">library</span>(bestglm)</span>
<span id="cb165-2"><a href="shiny.html#cb165-2"></a><span class="kw">amHist</span>(SAheart<span class="op">$</span>adiposity,<span class="dt">freq=</span><span class="ot">FALSE</span>,<span class="dt">xlab=</span><span class="st">&quot;adiposity&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-3138204c43c56206af5f" style="width:100%;height:500px;" class="ramcharts_base html-widget"></div>
<script type="application/json" data-for="htmlwidget-3138204c43c56206af5f">{"x":{"chartData":{"columnSpacing":0,"columnWidth":1,"fillAlphas":1,"lineAlpha":1,"categoryAxis":{"title":"adiposity"},"categoryField":"x","creditsPosition":"bottom-right","dataProvider":[{"x":7.5,"y":0.004,"cut":"(from 5 to 10)","color":"#1e90ff"},{"x":12.5,"y":0.019,"cut":"(from 10 to 15)","color":"#1e90ff"},{"x":17.5,"y":0.028,"cut":"(from 15 to 20)","color":"#1e90ff"},{"x":22.5,"y":0.038,"cut":"(from 20 to 25)","color":"#1e90ff"},{"x":27.5,"y":0.051,"cut":"(from 25 to 30)","color":"#1e90ff"},{"x":32.5,"y":0.039,"cut":"(from 30 to 35)","color":"#1e90ff"},{"x":37.5,"y":0.019,"cut":"(from 35 to 40)","color":"#1e90ff"},{"x":42.5,"y":0.002,"cut":"(from 40 to 45)","color":"#1e90ff"}],"graphs":[{"animationPlayed":false,"fillAlphas":0.8,"lineAlpha":1,"fillColorsField":"color","lineColor":"#1e90ff","labelText":"","balloonText":"<b>[[value]]<\/b> <br/> [[cut]] ","type":"column","valueField":"y"}],"theme":"light","type":"serial","valueAxes":[{"minimum":0,"maximum":0.05355,"title":"Density"}]},"background":"#ffffff","listeners":null,"axes_listeners":null,"axes_listenersIndices":null,"categoryAxis_listeners":null,"chartCursor_listeners":null,"dataSetSelector_listeners":null,"legend_listeners":null,"panels_listeners":null,"panels_listenersIndices":null,"periodSelector_listeners":null,"valueAxes_listeners":null,"valueAxes_listenersIndices":[],"stockLegend_listeners":null,"group":null,"is_ts_module":false},"evals":[],"jsHooks":[]}</script>
amBoxplot(adiposity~chd,data=SAheart)
<div id="htmlwidget-e5c88fc252b5e4ab8b2d" style="width:100%;height:500px;" class="ramcharts_base html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5c88fc252b5e4ab8b2d">{"x":{"chartData":{"rotate":false,"categoryField":"cat","dataProvider":[{"cat":"0","low_outlier":6.74,"low":6.74,"open":17.42,"median":24.62,"close":29.98,"high":42.06,"high_outlier":42.06,"color":"#1e90ff"},{"cat":"1","low_outlier":9.39,"low":9.39,"open":23.41,"median":28.41,"close":33.62,"high":42.49,"high_outlier":42.49,"color":"#1e90ff"}],"graphs":[{"animationPlayed":false,"id":"g1","closeField":"close","fillColorsField":"color","highField":"high","lineColor":"#7f8da9","lineAlpha":1,"lowField":"low","fillAlphas":"0.9","negativeLineColor":"#7f8da9","openField":"open","columnWidth":0.4,"balloonText":"High = <b>[[high_outlier]]<\/b><br/>3rd quart. = <b>[[close]]<\/b><br/>Median = <b>[[median]]<\/b><br/>1st quart. = <b>[[open]]<\/b><br/>Low = <b>[[low_outlier]]<\/b><br/>","title":"Price:","type":"candlestick","valueField":"close"},{"animationPlayed":false,"id":"g2","lineColor":"black","noStepRisers":true,"lineThickness":3,"periodSpan":0.4,"balloonText":"","type":"step","valueField":"median"},{"animationPlayed":false,"id":"g3","lineColor":"black","noStepRisers":true,"periodSpan":0.3,"balloonText":"","type":"step","valueField":"low_outlier"},{"animationPlayed":false,"id":"g4","lineColor":"black","noStepRisers":true,"periodSpan":0.3,"balloonText":"","type":"step","valueField":"high_outlier"},{"animationPlayed":false,"id":"g5","lineColor":"black","lineAlpha":0,"bullet":"round","noStepRisers":true,"periodSpan":0.5,"balloonText":"","type":"line","valueField":"real_outlier"},{"animationPlayed":false,"lineColor":"black","lineAlpha":0,"bullet":"round","noStepRisers":true,"periodSpan":0.5,"balloonText":"[[individual_1]]<br/><b> Value <\/b>: [[real_outlier_1]]","type":"line","valueField":"real_outlier_1"}],"theme":"light","type":"serial"},"background":"#ffffff","listeners":null,"axes_listeners":null,"axes_listenersIndices":null,"categoryAxis_listeners":null,"chartCursor_listeners":null,"dataSetSelector_listeners":null,"legend_listeners":null,"panels_listeners":null,"panels_listenersIndices":null,"periodSelector_listeners":null,"valueAxes_listeners":null,"valueAxes_listenersIndices":null,"stockLegend_listeners":null,"group":null,"is_ts_module":false},"evals":[],"jsHooks":[]}</script></li>
<li><p>Créer une application shiny avec <a href="https://rstudio.github.io/shinydashboard/index.html">shinydashboard</a> qui permette de</p>
<ul>
<li>choisir une variable parmi les variables quantitatives du jeu de données. On pourra utiliser <strong>radioButtons</strong> avec l’argument</li>
</ul>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="shiny.html#cb166-1"></a>choices=<span class="kw">names</span>(SAheart)[<span class="kw">sapply</span>(SAheart,class)<span class="op">==</span><span class="st">&quot;numeric&quot;</span>]</span></code></pre></div>
<ul>
<li>visualiser l’histogramme, puis le boxplot en fonction de <em>chd</em> de la variable sélectionnée. Ces graphiques devront être faits avec <strong>rAmCharts</strong>. On pourra utiliser <strong>amChartsOutput</strong>. L’application demandée pourra ressembler à</li>
</ul>
<p><iframe src="https://lrouviere.shinyapps.io/DESC_APP/?showcase=0" width="760" height="650px"></iframe></p></li>
</ol>
<p>Elle est disponible ici <a href="https://lrouviere.shinyapps.io/DESC_APP">https://lrouviere.shinyapps.io/DESC_APP</a>.</p>

<div class="exercise">
<span id="exr:shiny-velib-app" class="exercise"><strong>Exercice 4.4  (Stations velib à Rennes)  </strong></span>
</div>

<p>Réaliser une application qui permette de visualiser les stations velib à Rennes. Elle pourra être du même genre que celle-ci :</p>
<iframe src="https://lrouviere.shinyapps.io/velib/?showcase=0" width="760" height="650px">
</iframe>
<p>On peut avoir une meilleure vision ici : <a href="https://lrouviere.shinyapps.io/velib/">https://lrouviere.shinyapps.io/velib/</a>. On récupérera les données sur le site de Rennes métropole : <a href="https://data.rennesmetropole.fr/explore/dataset/etat-des-stations-le-velo-star-en-temps-reel/export/">https://data.rennesmetropole.fr/explore/dataset/etat-des-stations-le-velo-star-en-temps-reel/export/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="quelques-outils-de-visualisation-dynamiqueinteractive.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="références.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["TUTO_VISU.pdf", "TUTO_VISU.epub"],
"toc": {
"collapse": "subsection",
"fontsettings": {
"theme": "white",
"size": 2,
"family": "sans"
},
"sharing": {
"facebook": true,
"github": true,
"twitter": true
}
},
"highlight": "default"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
